<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚­ãƒ¬ã‚¤ã«ãªã‚Œã‚‹ã‹ãªï¼Ÿ - ç¾å®¹ãƒãƒ™ãƒ«ã‚²ãƒ¼ãƒ </title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Yu Gothic', 'Hiragino Sans', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100vh;
            overflow: hidden;
        }

        .game-container {
            position: relative;
            width: 100%;
            height: 100vh;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 800"><defs><linearGradient id="sky" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" style="stop-color:%23ffc3a0;stop-opacity:1" /><stop offset="70%" style="stop-color:%23ffafbd;stop-opacity:1" /><stop offset="100%" style="stop-color:%23c3cfe2;stop-opacity:1" /></linearGradient></defs><rect width="1200" height="800" fill="url(%23sky)"/><circle cx="900" cy="150" r="60" fill="%23fff2cc" opacity="0.8"/><polygon points="0,600 300,550 600,580 900,540 1200,520 1200,800 0,800" fill="%23a8e6cf" opacity="0.8"/></svg>') center/cover;
        }

        .character-display {
            position: absolute;
            bottom: 200px;
            right: 100px;
            width: 300px;
            height: 400px;
            transition: all 0.8s ease;
            opacity: 0;
            transform: translateX(50px);
        }

        .character-display.active {
            opacity: 1;
            transform: translateX(0);
        }

        .character-sprite {
            width: 100%;
            height: 100%;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 120px;
            color: white;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }

        .character-michiru {
            background-image: url('michiru_before.png');
            font-size: 0;
            /* background: linear-gradient(135deg, #ff6b6b, #ff8e8e); */
        }

        .character-michiru-after {
            background-image: url('michiru_after.png');
            font-size: 0;
            /* background: linear-gradient(135deg, #ff9a9e, #fad0c4); */
        }

        .character-purin {
            background-image: url('purin.png');
            font-size: 0;
            /* background: linear-gradient(135deg, #ffd93d, #ffbe0b); */
        }

        .character-friend {
            background-image: url('friend.png');
            font-size: 0;
            /* background: linear-gradient(135deg, #74b9ff, #0984e3); */
        }

        .character-aged {
            background-image: url('aged.png');
            font-size: 0;
            /* background: linear-gradient(135deg, #636e72, #2d3436); */
        }

        .text-box {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 200px;
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.9), rgba(20, 20, 40, 0.95));
            backdrop-filter: blur(10px);
            border-top: 3px solid #ff6b6b;
            padding: 20px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .speaker-name {
            font-size: 18px;
            font-weight: bold;
            color: #ff6b6b;
            margin-bottom: 10px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
        }

        .message-text {
            flex: 1;
            font-size: 16px;
            line-height: 1.6;
            color: #ffffff;
            overflow-y: auto;
            padding-right: 10px;
        }

        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 10px;
        }

        .next-btn {
            background: linear-gradient(135deg, #ff6b6b, #ff8e8e);
            color: white;
            border: none;
            padding: 8px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
        }

        .next-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 107, 107, 0.4);
        }

        .choice-container {
            position: absolute;
            bottom: 220px;
            left: 50%;
            transform: translateX(-50%);
            display: none;
            flex-direction: column;
            gap: 15px;
            min-width: 400px;
        }

        .choice-container.active {
            display: flex;
        }

        .choice-btn {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.05));
            backdrop-filter: blur(15px);
            border: 2px solid rgba(255, 107, 107, 0.5);
            color: white;
            padding: 15px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            transition: all 0.3s ease;
            text-align: left;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        .choice-btn:hover {
            background: linear-gradient(135deg, rgba(255, 107, 107, 0.3), rgba(255, 107, 107, 0.1));
            border-color: #ff6b6b;
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(255, 107, 107, 0.3);
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="character-display" id="characterDisplay">
            <div class="character-sprite">ğŸ‘©â€ğŸ“</div>
        </div>

        <div class="choice-container" id="choiceContainer"></div>

        <div class="text-box">
            <div class="speaker-name" id="speakerName">ãƒŠãƒ¬ãƒ¼ã‚¿ãƒ¼</div>
            <div class="message-text" id="messageText">
                ã€ã‚­ãƒ¬ã‚¤ã«ãªã‚Œã‚‹ã‹ãªï¼Ÿã€<br><br>ç¾å®¹ã‚’å­¦ã¶ãƒãƒ™ãƒ«ã‚²ãƒ¼ãƒ ã§ã™ã€‚<br><br>æ­£ã—ã„é¸æŠã‚’ã—ã¦ã€ç†æƒ³ã®ç¾è‚Œã‚’æ‰‹ã«å…¥ã‚Œã¾ã—ã‚‡ã†â™ª
            </div>
            <div class="controls">
                <div style="font-size: 12px; color: #aaa;">ã‚¯ãƒªãƒƒã‚¯ã¾ãŸã¯ã‚¹ãƒšãƒ¼ã‚¹ã‚­ãƒ¼ã§é€²ã‚€</div>
                <button class="next-btn" onclick="nextMessage()">æ¬¡ã¸ â–¶</button>
            </div>
        </div>
    </div>

    <script>
        let currentScene = 0;
        let isTyping = false;

        const scenes = [
            // ã‚·ãƒ¼ãƒ³0: ã‚¿ã‚¤ãƒˆãƒ«ç”»é¢
            {
                speaker: "ãƒŠãƒ¬ãƒ¼ã‚¿ãƒ¼",
                text: "ã€ã‚­ãƒ¬ã‚¤ã«ãªã‚Œã‚‹ã‹ãªï¼Ÿã€<br><br>ç¾å®¹ã‚’å­¦ã¶ãƒãƒ™ãƒ«ã‚²ãƒ¼ãƒ ã§ã™ã€‚<br><br>æ­£ã—ã„é¸æŠã‚’ã—ã¦ã€ç†æƒ³ã®ç¾è‚Œã‚’æ‰‹ã«å…¥ã‚Œã¾ã—ã‚‡ã†â™ª",
                character: null,
                background: "default"
            },
            
            // ã‚·ãƒ¼ãƒ³1: ã‚ªãƒ¼ãƒ—ãƒ‹ãƒ³ã‚°
            {
                speaker: "ãƒŠãƒ¬ãƒ¼ã‚¿ãƒ¼",
                text: "å¤§å­¦2å¹´ç”Ÿã®ã¿ã¡ã‚‹ï¼ˆ20æ­³ï¼‰ã¯ã€ç¾å®¹ã«å…¨ãèˆˆå‘³ãŒãªã„å¥³ã®å­ã€‚<br>ä»Šæ—¥ã‚‚é©å½“ã«æ—¥ç„¼ã‘æ­¢ã‚ã‚’å¡—ã£ã¦å¤–å‡ºã™ã‚‹æº–å‚™ã‚’ã—ã¦ã„ãŸ...",
                character: null,
                background: "room"
            },
            
            // ã‚·ãƒ¼ãƒ³2: ã¿ã¡ã‚‹ã®ç™»å ´
            {
                speaker: "ã¿ã¡ã‚‹",
                text: "ã‚ãƒ¼ã€ã¾ãŸé…åˆ»ã—ãã†ï¼<br>æ—¥ç„¼ã‘æ­¢ã‚ã‚‚é©å½“ã«å¡—ã£ã¡ã‚ƒãˆã€œ",
                character: "ğŸ‘©â€ğŸ“",
                background: "room"
            },
            
            // ã‚·ãƒ¼ãƒ³3: ãƒãƒ ã‚¹ã‚¿ãƒ¼ã®ç™»å ´
            {
                speaker: "ã·ã‚Šã‚“",
                text: "ã¡ã‚‡ã£ã¨å¾…ã£ãŸãƒ¼ï¼ï¼<br>ãã®å¡—ã‚Šæ–¹ã˜ã‚ƒãƒ€ãƒ¡ã ã‚ˆã€œï¼ç§ã€ç¾å®¹ã®ãƒ—ãƒ­ã®ãƒãƒ ã‚¹ã‚¿ãƒ¼ã€ã·ã‚Šã‚“ã‚ˆâ™ª",
                character: "ğŸ¹",
                background: "room"
            },
            
            // ã‚·ãƒ¼ãƒ³4: ã¿ã¡ã‚‹ã®åå¿œ
            {
                speaker: "ã¿ã¡ã‚‹",
                text: "ãˆï¼Ÿï¼ãƒãƒ ã‚¹ã‚¿ãƒ¼ãŒå–‹ã£ã¦ã‚‹ï¼Ÿï¼<br>ã—ã€ã—ã‹ã‚‚ç¾å®¹ã®ãƒ—ãƒ­ã£ã¦ä½•ãã‚Œ...",
                character: "ğŸ‘©â€ğŸ“",
                background: "room"
            },
            
            // ã‚·ãƒ¼ãƒ³5: ã·ã‚Šã‚“ã®èª¬æ˜
            {
                speaker: "ã·ã‚Šã‚“",
                text: "ç§ã¯ç¾å®¹ã®å¦–ç²¾ãªã®ï¼ã¿ã¡ã‚‹ã¡ã‚ƒã‚“ã®è‚Œã€ã“ã®ã¾ã¾ã ã¨å¤§å¤‰ãªã“ã¨ã«ãªã£ã¡ã‚ƒã†ã‚ˆã€œï¼<br>æ­£ã—ã„ã‚¹ã‚­ãƒ³ã‚±ã‚¢ã‚’æ•™ãˆã¦ã‚ã’ã‚‹â™ª",
                character: "ğŸ¹",
                background: "room"
            },
            
            // ã‚·ãƒ¼ãƒ³6: é¸æŠè‚¢1 - æœ€åˆã®åˆ†å²
            {
                speaker: "ã·ã‚Šã‚“",
                text: "ã¾ãšåŸºæœ¬ä¸­ã®åŸºæœ¬ï¼æ—¥ç„¼ã‘æ­¢ã‚ã®æ­£ã—ã„å¡—ã‚Šæ–¹ã‹ã‚‰æ•™ãˆã‚‹ã­ã€‚<br>ã©ã®ãã‚‰ã„ã®é‡ã‚’ä½¿ãˆã°ã„ã„ã¨æ€ã†ï¼Ÿ",
                character: "ğŸ¹",
                background: "room",
                choices: [
                    { text: "500å††ç‰å¤§ãã‚‰ã„ã‹ãªï¼Ÿ", next: 7 },
                    { text: "å°‘ã—ã§ã„ã„ã§ã—ã‚‡ã€ã‚‚ã£ãŸã„ãªã„ã—", next: 9 },
                    { text: "ã‚ã‹ã‚‰ãªã„ã€æ•™ãˆã¦ï¼", next: 11 }
                ]
            },
            
            // ã‚·ãƒ¼ãƒ³7-8: æ­£è§£ãƒ«ãƒ¼ãƒˆï¼ˆ500å††ç‰å¤§ï¼‰
            {
                speaker: "ã·ã‚Šã‚“",
                text: "æ­£è§£ã€œï¼â™ª é¡”å…¨ä½“ã«500å††ç‰å¤§ãŒç›®å®‰ã‚ˆï¼<br>ã¿ã¡ã‚‹ã¡ã‚ƒã‚“ã€ã‚»ãƒ³ã‚¹ã‚ã‚‹ã˜ã‚ƒãªã„ï¼",
                character: "ğŸ¹",
                background: "room"
            },
            {
                speaker: "ã¿ã¡ã‚‹",
                text: "æœ¬å½“ï¼Ÿå¬‰ã—ã„ï¼ã§ã‚‚ä»Šã¾ã§å…¨ç„¶è¶³ã‚Šã¦ãªã‹ã£ãŸ...<br>ã‚‚ã£ã¨æ•™ãˆã¦ã€ã·ã‚Šã‚“ï¼",
                character: "ğŸ‘©â€ğŸ“",
                background: "room"
            },
            
            // ã‚·ãƒ¼ãƒ³9-10: ä¸æ­£è§£ãƒ«ãƒ¼ãƒˆï¼ˆã‚±ãƒã‚±ãƒï¼‰
            {
                speaker: "ã·ã‚Šã‚“",
                text: "ã‚ã¡ã‚ƒã€œğŸ’¦ ãã‚Œã˜ã‚ƒå…¨ç„¶è¶³ã‚Šãªã„ã‚ˆã€œï¼é¡”å…¨ä½“ã«500å††ç‰å¤§ãŒç›®å®‰ã‚ˆï¼<br>æ—¥ç„¼ã‘æ­¢ã‚ã‚’ã‚±ãƒã£ãŸã‚‰ã€ã‚·ãƒŸã®åŸå› ã«ãªã£ã¡ã‚ƒã†ï¼",
                character: "ğŸ¹",
                background: "room"
            },
            {
                speaker: "ã¿ã¡ã‚‹",
                text: "ãˆã€ãã†ãªã®ï¼Ÿï¼çŸ¥ã‚‰ãªã‹ã£ãŸ...<br>ã‚±ãƒã£ã¡ã‚ƒãƒ€ãƒ¡ãªã‚“ã ã­",
                character: "ğŸ‘©â€ğŸ“",
                background: "room"
            },
            
            // ã‚·ãƒ¼ãƒ³11-12: ç´ ç›´ãƒ«ãƒ¼ãƒˆ
            {
                speaker: "ã·ã‚Šã‚“",
                text: "ã„ã„å¿ƒãŒã‘ã­â™ª é¡”å…¨ä½“ã«500å††ç‰å¤§ãŒåŸºæœ¬ã‚ˆï¼<br>ãã—ã¦å¤§äº‹ãªã®ã¯å¡—ã‚Šæ–¹ï¼",
                character: "ğŸ¹",
                background: "room"
            },
            {
                speaker: "ã¿ã¡ã‚‹",
                text: "500å††ç‰å¤§...ãƒ¡ãƒ¢ãƒ¡ãƒ¢ğŸ“<br>å¡—ã‚Šæ–¹ã‚‚å¤§äº‹ãªã‚“ã§ã™ã­ï¼",
                character: "ğŸ‘©â€ğŸ“",
                background: "room"
            },
            
            // ã‚·ãƒ¼ãƒ³13: æ—¥ç„¼ã‘æ­¢ã‚ã®å¡—ã‚Šæ–¹è¬›åº§
            {
                speaker: "ã·ã‚Šã‚“",
                text: "æ¬¡ã¯å¡—ã‚Šæ–¹ã‚ˆï¼ã¾ãšæ‰‹ã®ã²ã‚‰ã§æ—¥ç„¼ã‘æ­¢ã‚ã‚’æ¸©ã‚ã¦ã‹ã‚‰ã€<br>ãŠã§ã“â†’ä¸¡é ¬â†’é¼»â†’ã‚ã”ã®5ç‚¹ã«ç½®ã„ã¦ã€å„ªã—ãä¼¸ã°ã™ã®â™ª",
                character: "ğŸ¹",
                background: "room"
            },
            
            // ã‚·ãƒ¼ãƒ³14: é¸æŠè‚¢2 - å¡—ã‚Šæ–¹
            {
                speaker: "ã·ã‚Šã‚“",
                text: "ã•ã‚ã€å®Ÿéš›ã«ã‚„ã£ã¦ã¿ã¦ï¼<br>ã©ã‚“ãªé¢¨ã«å¡—ã‚‹ï¼Ÿ",
                character: "ğŸ¹",
                background: "room",
                choices: [
                    { text: "ã‚´ã‚·ã‚´ã‚·å¡—ã‚Šè¾¼ã‚€ï¼", next: 15 },
                    { text: "å„ªã—ããƒãƒ³ãƒãƒ³ã¨å©ãè¾¼ã‚€", next: 17 },
                    { text: "æ‰‹ã®ã²ã‚‰ã§æŠ¼ã—è¾¼ã‚€ã‚ˆã†ã«", next: 19 }
                ]
            },
            
            // ã‚·ãƒ¼ãƒ³15-16: ãƒãƒƒãƒ‰ã‚¨ãƒ³ãƒ‰ç›´è¡Œãƒ«ãƒ¼ãƒˆ
            {
                speaker: "ã·ã‚Šã‚“",
                text: "ã‚ãƒ¼ã£ï¼ãƒ€ãƒ¡ãƒ€ãƒ¡ã€œï¼ğŸ’¦<br>ã‚´ã‚·ã‚´ã‚·ã—ãŸã‚‰è‚ŒãŒå‚·ã¤ã„ã¡ã‚ƒã†ï¼å„ªã—ããƒãƒ³ãƒãƒ³ã—ã¦",
                character: "ğŸ¹",
                background: "room"
            },
            {
                speaker: "ã¿ã¡ã‚‹",
                text: "ãˆï¼Ÿã§ã‚‚ã€ã—ã£ã‹ã‚Šå¡—ã‚‰ãªã„ã¨åŠ¹æœãªã„ã‚“ã˜ã‚ƒ...",
                character: "ğŸ‘©â€ğŸ“",
                background: "room"
            },
            
            // ã‚·ãƒ¼ãƒ³17-18: è‰¯ã„å›ç­”
            {
                speaker: "ã·ã‚Šã‚“",
                text: "ã„ã„ã­ã€œâ™ª å„ªã—ããƒãƒ³ãƒãƒ³ãŒæ­£è§£ï¼<br>è‚Œã«è² æ‹…ã‚’ã‹ã‘ãšã«ã€ãƒ ãƒ©ãªãå¡—ã‚Œã‚‹ã®ã‚ˆï¼",
                character: "ğŸ¹",
                background: "room"
            },
            {
                speaker: "ã¿ã¡ã‚‹",
                text: "ãªã‚‹ã»ã©ã€œï¼å„ªã—ã•ãŒå¤§äº‹ãªã‚“ã§ã™ã­â™ª<br>ä»–ã«ã‚‚æ•™ãˆã¦ãã ã•ã„ï¼",
                character: "ğŸ‘©â€ğŸ“",
                background: "room"
            },
            
            // ã‚·ãƒ¼ãƒ³19-20: ã¾ã‚ã¾ã‚ã®å›ç­”
            {
                speaker: "ã·ã‚Šã‚“",
                text: "ã†ãƒ¼ã‚“ã€æ‚ªããªã„ã‘ã©ã€ã‚‚ã£ã¨è‰¯ã„æ–¹æ³•ãŒã‚ã‚‹ã®ï¼<br>ãƒãƒ³ãƒãƒ³ã¨å©ãè¾¼ã‚€æ–¹ãŒè‚Œã«å„ªã—ã„ã®ã‚ˆâ™ª",
                character: "ğŸ¹",
                background: "room"
            },
            {
                speaker: "ã¿ã¡ã‚‹",
                text: "ãƒãƒ³ãƒãƒ³...Ï†(..)ãƒ¡ãƒ¢ãƒ¡ãƒ¢<br>ç¾å®¹ã£ã¦å¥¥ãŒæ·±ã„ã‚“ã§ã™ã­ï¼",
                character: "ğŸ‘©â€ğŸ“",
                background: "room"
            },
            
            // ã‚·ãƒ¼ãƒ³21: åŸºç¤åŒ–ç²§å“ã®è©±ã¸
            {
                speaker: "ã·ã‚Šã‚“",
                text: "æ—¥ç„¼ã‘æ­¢ã‚ã‚’ãƒã‚¹ã‚¿ãƒ¼ã—ãŸã‚‰ã€æ¬¡ã¯åŸºç¤åŒ–ç²§å“ã‚ˆï¼<br>ã‚¯ãƒ¬ãƒ³ã‚¸ãƒ³ã‚°â†’æ´—é¡”â†’åŒ–ç²§æ°´â†’ç¾å®¹æ¶²â†’ä¹³æ¶²ã®é †ç•ªãŒåŸºæœ¬â™ª",
                character: "ğŸ¹",
                background: "room"
            },
            
            // ã‚·ãƒ¼ãƒ³22: ã¿ã¡ã‚‹ã®ç¾çŠ¶
            {
                speaker: "ã¿ã¡ã‚‹",
                text: "ãˆã€œã¨...ç§ã€ä»Šã¾ã§æ´—é¡”æ–™ã§é¡”æ´—ã£ã¦çµ‚ã‚ã‚Šã§ã—ãŸğŸ’¦<br>åŒ–ç²§æ°´ã¨ã‹ã‚ˆãã‚ã‹ã‚‰ãªãã¦...",
                character: "ğŸ‘©â€ğŸ“",
                background: "room"
            },
            
            // ã‚·ãƒ¼ãƒ³23: é¸æŠè‚¢3 - ã‚¹ã‚­ãƒ³ã‚±ã‚¢ã®é‡è¦æ€§
            {
                speaker: "ã·ã‚Šã‚“",
                text: "åŒ–ç²§æ°´ã®ä¸€ç•ªå¤§äº‹ãªå½¹å‰²ã¯ä½•ã ã¨æ€ã†ï¼Ÿ",
                character: "ğŸ¹",
                background: "room",
                choices: [
                    { text: "è‚Œã«æ°´åˆ†ã‚’ä¸ãˆã‚‹", next: 24 },
                    { text: "è‚Œã‚’ãã‚Œã„ã«ã™ã‚‹", next: 26 },
                    { text: "åŒ–ç²§ã®ã‚Šã‚’è‰¯ãã™ã‚‹", next: 28 }
                ]
            },
            
            // ã‚·ãƒ¼ãƒ³24-25: æ­£è§£ï¼ˆæ°´åˆ†è£œçµ¦ï¼‰
            {
                speaker: "ã·ã‚Šã‚“",
                text: "æ­£è§£ã€œï¼ï¼ åŒ–ç²§æ°´ã¯è‚Œã«æ°´åˆ†ã‚’ä¸ãˆã‚‹ã®ãŒä¸€ç•ªå¤§äº‹â™ª<br>ä¹¾ç‡¥ã¯ã‚·ãƒŸãƒ»ã‚·ãƒ¯ã®å¤§æ•µãªã®ã‚ˆã€œï¼",
                character: "ğŸ¹",
                background: "room"
            },
            {
                speaker: "ã¿ã¡ã‚‹",
                text: "ãã†ãªã‚“ã ï¼ä¹¾ç‡¥ãŒãã‚“ãªã«æ‚ªã„ãªã‚“ã¦çŸ¥ã‚‰ãªã‹ã£ãŸ...<br>ä»Šæ—¥ã‹ã‚‰çµ¶å¯¾åŒ–ç²§æ°´ä½¿ã„ã¾ã™ï¼",
                character: "ğŸ‘©â€ğŸ“",
                background: "room"
            },
            
            // ã‚·ãƒ¼ãƒ³26-27: ä¸æ­£è§£1
            {
                speaker: "ã·ã‚Šã‚“",
                text: "ã†ãƒ¼ã‚“ã€ãã‚Œã¯æ´—é¡”ã®å½¹å‰²ã­ğŸ’¦<br>åŒ–ç²§æ°´ã¯è‚Œã«æ°´åˆ†ã‚’ä¸ãˆã¦ã€æ½¤ã„ã‚’ä¿ã¤ã®ãŒç›®çš„ã‚ˆâ™ª",
                character: "ğŸ¹",
                background: "room"
            },
            {
                speaker: "ã¿ã¡ã‚‹",
                text: "ã‚ã€ãã†ã‹...æ´—é¡”ã¨ã¯é•ã†ã‚“ã§ã™ã­ï¼<br>å‹‰å¼·ã«ãªã‚Šã¾ã™ï¼",
                character: "ğŸ‘©â€ğŸ“",
                background: "room"
            },
            
            // ã‚·ãƒ¼ãƒ³28-29: ä¸æ­£è§£2
            {
                speaker: "ã·ã‚Šã‚“",
                text: "ãã‚Œã‚‚åŠ¹æœã®ä¸€ã¤ã ã‘ã©ã€ãƒ¡ã‚¤ãƒ³ã˜ã‚ƒãªã„ã®ï¼<br>ä¸€ç•ªå¤§äº‹ãªã®ã¯è‚Œã«æ°´åˆ†ã‚’ä¸ãˆã‚‹ã“ã¨ã‚ˆâ™ª",
                character: "ğŸ¹",
                background: "room"
            },
            {
                speaker: "ã¿ã¡ã‚‹",
                text: "æ°´åˆ†è£œçµ¦ãŒå¤§äº‹ãªã‚“ã§ã™ã­ï¼<br>ãŠè‚Œã‚‚å–‰ãŒæ¸‡ãã®ã‹ã€œ",
                character: "ğŸ‘©â€ğŸ“",
                background: "room"
            },
            
            // ã‚·ãƒ¼ãƒ³30: æœ€çµ‚è©¦é¨“ã¸ã®å°å…¥
            {
                speaker: "ã·ã‚Šã‚“",
                text: "ã•ã‚ã€æœ€å¾Œã®è©¦é¨“ã‚ˆï¼ä»Šåº¦ã®é€±æœ«ã€å‹é”ã¨æµ·ã«è¡Œãã‚“ã§ã—ã‚‡ï¼Ÿ<br>å®Œç’§ãªæº–å‚™ã‚’ã—ã¦ã€å¢æŠœã‘ãŸç¾è‚Œã‚’æ‰‹ã«å…¥ã‚Œã¾ã—ã‚‡ã†â™ª",
                character: "ğŸ¹",
                background: "room"
            },
            
            // ã‚·ãƒ¼ãƒ³31: æœ€çµ‚é¸æŠè‚¢
            {
                speaker: "ã·ã‚Šã‚“",
                text: "æµ·ã«è¡Œãå‰æ—¥ã®å¤œã€ã©ã‚“ãªã‚¹ãƒšã‚·ãƒ£ãƒ«ã‚±ã‚¢ã‚’ã™ã‚‹ï¼Ÿ",
                character: "ğŸ¹",
                background: "room",
                choices: [
                    { text: "ãƒ‘ãƒƒã‚¯ã‚’ã—ã¦æ—©ã‚ã«å¯ã‚‹", next: 32 },
                    { text: "æ–°ã—ã„åŒ–ç²§å“ã‚’è©¦ã—ã¦ã¿ã‚‹", next: 36 },
                    { text: "ç‰¹ã«ä½•ã‚‚ã—ãªã„", next: 40 }
                ]
            },
            
            // ã‚·ãƒ¼ãƒ³32-35: ãƒãƒƒãƒ”ãƒ¼ã‚¨ãƒ³ãƒ‰
            {
                speaker: "ã·ã‚Šã‚“",
                text: "ç´ æ™´ã‚‰ã—ã„åˆ¤æ–­ï¼ï¼ ãƒ‘ãƒƒã‚¯ã§è‚Œã«æ „é¤Šã‚’ä¸ãˆã¦ã€<br>æ—©å¯ã§è‚Œã®ã‚¿ãƒ¼ãƒ³ã‚ªãƒ¼ãƒãƒ¼ã‚’ä¿ƒé€²â™ª å®Œç’§ã‚ˆã€œï¼",
                character: "ğŸ¹",
                background: "room"
            },
            {
                speaker: "ãƒŠãƒ¬ãƒ¼ã‚¿ãƒ¼",
                text: "ç¿Œæ—¥ã€æµ·ã«ã¦â”€",
                character: null,
                background: "beach"
            },
            {
                speaker: "å‹é”",
                text: "ã¿ã¡ã‚‹ã€œï¼ãªã‚“ã‹è‚ŒãŒãƒ„ãƒ¤ãƒ„ãƒ¤ã§ç¶ºéº—ã«ãªã£ãŸï¼Ÿ<br>ã©ã‚“ãªã‚±ã‚¢ã—ã¦ã‚‹ã®ï¼Ÿæ•™ãˆã¦ã€œï¼",
                character: "ğŸ‘©â€ğŸ’¼",
                background: "beach"
            },
            {
                speaker: "ã¿ã¡ã‚‹",
                text: "ãˆã¸ã¸â™ª å®Ÿã¯ç¾å®¹ã«ç›®è¦šã‚ã¡ã‚ƒã£ã¦ï¼<br>æ­£ã—ã„ã‚¹ã‚­ãƒ³ã‚±ã‚¢ã£ã¦ã™ã”ã„ã‚“ã ã­ã€œâœ¨ ã·ã‚Šã‚“ã€ã‚ã‚ŠãŒã¨ã†ï¼",
                character: "ğŸ‘©â€ğŸ“",
                characterType: "after",
                background: "beach"
            },
            
            // ã‚·ãƒ¼ãƒ³36-39: ãƒãƒƒãƒ‰ã‚¨ãƒ³ãƒ‰1
            {
                speaker: "ã·ã‚Šã‚“",
                text: "ãˆãƒ¼ã£ï¼å‰æ—¥ã«æ–°ã—ã„åŒ–ç²§å“ã¯å±é™ºã‚ˆã€œï¼ğŸ’¦<br>è‚Œã«åˆã‚ãªã‹ã£ãŸã‚‰å¤§å¤‰ãªã“ã¨ã«...",
                character: "ğŸ¹",
                background: "room"
            },
            {
                speaker: "ãƒŠãƒ¬ãƒ¼ã‚¿ãƒ¼",
                text: "ç¿Œæœâ”€",
                character: null,
                background: "room"
            },
            {
                speaker: "ã¿ã¡ã‚‹",
                text: "ã†ã‚ã‚ã‚ã‚ï¼é¡”ãŒçœŸã£èµ¤ã«è…«ã‚Œã¦ã‚‹ã€œï¼ğŸ’¦<br>æµ·ã«è¡Œã‘ãªã„...ğŸ˜­",
                character: "ğŸ‘©â€ğŸ“",
                background: "room"
            },
            {
                speaker: "ã·ã‚Šã‚“",
                text: "æ–°ã—ã„åŒ–ç²§å“ã¯è‚Œã«åˆã†ã‹ãƒ†ã‚¹ãƒˆãŒå¿…è¦ãªã®ï¼<br>å‰æ—¥ã«è©¦ã™ãªã‚“ã¦ç„¡è¬€ã‚ˆã€œã€‚æ¬¡ã¯æ°—ã‚’ã¤ã‘ã¦ã­ğŸ’¦",
                character: "ğŸ¹",
                background: "room"
            },
            
            // ã‚·ãƒ¼ãƒ³40-43: ãƒãƒƒãƒ‰ã‚¨ãƒ³ãƒ‰2ï¼ˆã‚·ãƒŸãŠã°ã•ã‚“ï¼‰
            {
                speaker: "ã·ã‚Šã‚“",
                text: "ã‚ãƒ¼ã‚...ã›ã£ã‹ãæ•™ãˆãŸã®ã«ã€œğŸ’¦<br>ç´«å¤–ç·šå¯¾ç­–ã—ãªã„ã¨ã€å°†æ¥å¤§å¤‰ãªã“ã¨ã«ãªã£ã¡ã‚ƒã†ã‚ˆ...",
                character: "ğŸ¹",
                background: "room"
            },
            {
                speaker: "ãƒŠãƒ¬ãƒ¼ã‚¿ãƒ¼",
                text: "20å¹´å¾Œâ”€",
                character: null,
                background: "city"
            },
            {
                speaker: "ã¿ã¡ã‚‹ï¼ˆ40æ­³ï¼‰",
                text: "ã‚ã‚Œï¼Ÿé¡ã«æ˜ ã£ã¦ã‚‹ã“ã®ã‚·ãƒŸã ã‚‰ã‘ã®äºº...ã¾ã•ã‹ç§ï¼Ÿï¼<br>å­¦ç”Ÿæ™‚ä»£ã«ã‚‚ã£ã¨ã‚±ã‚¢ã—ã¦ãŠã‘ã°ã‚ˆã‹ã£ãŸã€œğŸ˜­",
                character: "ğŸ‘©â€ğŸ¦³",
                background: "city"
            },
            {
                speaker: "ã·ã‚Šã‚“",
                text: "ç¾å®¹ã¯ç¶™ç¶šãŒå¤§äº‹ãªã®ã‚ˆã€œ...<br>ã§ã‚‚ä»Šã‹ã‚‰ã§ã‚‚é…ããªã„ï¼æ­£ã—ã„ã‚±ã‚¢ã‚’å§‹ã‚ã¾ã—ã‚‡ã†â™ª",
                character: "ğŸ¹",
                background: "city"
            },
            
            // ã‚·ãƒ¼ãƒ³44: å…±é€šã‚¨ãƒ³ãƒ‡ã‚£ãƒ³ã‚°
            {
                speaker: "ãƒŠãƒ¬ãƒ¼ã‚¿ãƒ¼",
                text: "ç¾å®¹ã¯ä¸€æ—¥ã«ã—ã¦ãªã‚‰ãšã€‚<br>æ­£ã—ã„çŸ¥è­˜ã¨ç¶™ç¶šãŒç¾è‚Œã¸ã®è¿‘é“ã§ã™ã€‚<br><br>ã‚‚ã†ä¸€åº¦ãƒ—ãƒ¬ã‚¤ã—ã¦ã€å®Œç’§ãªç¾è‚Œã‚’ç›®æŒ‡ã—ã¾ã—ã‚‡ã†â™ª",
                character: null,
                background: "default"
            }
        ];

        function typeText(element, text, callback) {
            if (isTyping) return;
            isTyping = true;
            element.innerHTML = '';
            let index = 0;
            
            function typeChar() {
                if (index < text.length) {
                    if (text[index] === '<') {
                        let tagEnd = text.indexOf('>', index);
                        element.innerHTML += text.substring(index, tagEnd + 1);
                        index = tagEnd + 1;
                    } else {
                        element.innerHTML += text[index];
                        index++;
                    }
                    setTimeout(typeChar, 30);
                } else {
                    isTyping = false;
                    if (callback) callback();
                }
            }
            
            typeChar();
        }

        function showScene(sceneIndex) {
            if (sceneIndex >= scenes.length) {
                currentScene = 0;
                showScene(0);
                return;
            }

            const scene = scenes[sceneIndex];
            const speakerElement = document.getElementById('speakerName');
            const messageElement = document.getElementById('messageText');
            const characterElement = document.getElementById('characterDisplay');
            const choiceContainer = document.getElementById('choiceContainer');

            // èƒŒæ™¯å¤‰æ›´å‡¦ç†
            if (scene.background) {
                const gameContainer = document.querySelector('.game-container');
                
                if (scene.background === "room") {
                    gameContainer.style.background = "url('room.jpg') center/cover";
                } else if (scene.background === "beach") {
                    gameContainer.style.background = "url('beach.jpg') center/cover";
                } else if (scene.background === "city") {
                    gameContainer.style.background = "url('city.jpg') center/cover";
                } else if (scene.background === "school") {
                    gameContainer.style.background = "url('school.jpg') center/cover";
                } else if (scene.background === "default") {
                    gameContainer.style.background = "url('default.jpg') center/cover";
                }
            }

            // Hide choices
            choiceContainer.classList.remove('active');
            choiceContainer.innerHTML = '';

            if (scene.choices) {
                // Show choices
                scene.choices.forEach((choice, index) => {
                    const choiceBtn = document.createElement('button');
                    choiceBtn.className = 'choice-btn fade-in';
                    choiceBtn.textContent = choice.text;
                    choiceBtn.style.animationDelay = `${index * 0.1}s`;
                    choiceBtn.onclick = () => {
                        currentScene = choice.next;
                        showScene(choice.next);
                    };
                    choiceContainer.appendChild(choiceBtn);
                });
                choiceContainer.classList.add('active');
                speakerElement.textContent = '';
                messageElement.innerHTML = '';
            } else {
                // Show regular scene
                speakerElement.textContent = scene.speaker || '';
                
                if (scene.character) {
                    const spriteElement = characterElement.querySelector('.character-sprite');
                    spriteElement.textContent = scene.character;
                    
                    // ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ç”»åƒé©ç”¨
                    spriteElement.className = 'character-sprite';
                    if (scene.character === "ğŸ‘©â€ğŸ“") {
                        if (scene.characterType === "after") {
                            spriteElement.classList.add('character-michiru-after');
                        } else {
                            spriteElement.classList.add('character-michiru');
                        }
                    } else if (scene.character === "ğŸ¹") {
                        spriteElement.classList.add('character-purin');
                    } else if (scene.character === "ğŸ‘©â€ğŸ’¼") {
                        spriteElement.classList.add('character-friend');
                    } else if (scene.character === "ğŸ‘©â€ğŸ¦³") {
                        spriteElement.classList.add('character-aged');
                    }
                    
                    characterElement.classList.add('active');
                } else {
                    characterElement.classList.remove('active');
                }

                typeText(messageElement, scene.text);
            }
        }

        function nextMessage() {
            if (isTyping) {
                return;
            }
            
            // é¸æŠè‚¢ãŒãªã„ã‚·ãƒ¼ãƒ³ã§ã®ã¿è‡ªå‹•çš„ã«æ¬¡ã®ã‚·ãƒ¼ãƒ³ã«é€²ã‚€
            const currentSceneData = scenes[currentScene];
            if (!currentSceneData.choices) {
                if (currentScene < scenes.length - 1) {
                    // åˆ†å²å¾Œã®åˆæµå‡¦ç†
                    if (currentScene === 8 || currentScene === 10 || currentScene === 12) {
                        // ã‚·ãƒ¼ãƒ³8, 10, 12ã®å¾Œã¯å…¨ã¦ã‚·ãƒ¼ãƒ³13ã«åˆæµ
                        currentScene = 13;
                    } else if (currentScene === 18 || currentScene === 16 || currentScene === 20) {
                        // ã‚·ãƒ¼ãƒ³18, 16, 20ã®å¾Œã¯å…¨ã¦ã‚·ãƒ¼ãƒ³21ã«åˆæµ
                        currentScene = 21;
                    } else if (currentScene === 25 || currentScene === 27 || currentScene === 29) {
                        // ã‚·ãƒ¼ãƒ³25, 27, 29ã®å¾Œã¯å…¨ã¦ã‚·ãƒ¼ãƒ³30ã«åˆæµ
                        currentScene = 30;
                    } else {
                        currentScene++;
                    }
                } else {
                    currentScene = 0;
                }
            }
            
            showScene(currentScene);
        }

        // Initialize
        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space') {
                e.preventDefault();
                nextMessage();
            }
        });

        document.addEventListener('click', (e) => {
            if (e.target.closest('.choice-btn') || e.target.closest('.next-btn')) {
                return;
            }
            nextMessage();
        });

        // Start the game
        showScene(0);
    </script>
</body>
</html>